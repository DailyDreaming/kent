# for emacs: -*- mode: sh; -*-

# This file describes browser build for the balAcu1
# Balaenoptera acutorostrata scammoni - Minke whale

#	DATE:   31-Oct-2013
#	ORGANISM:       Balaenoptera acutorostrata scammoni
#	TAXID:  310752
#	ASSEMBLY LONG NAME:     BalAcu1.0
#	ASSEMBLY SHORT NAME:    BalAcu1.0
#	ASSEMBLY SUBMITTER:     Korea Ocean Research & Development Institute
#	ASSEMBLY TYPE:  Haploid
#	NUMBER OF ASSEMBLY-UNITS:       1
#	ASSEMBLY ACCESSION:     GCA_000493695.1

#	FTP-RELEASE DATE: 07-Nov-2013

#       rsync://ftp.ncbi.nlm.nih.gov/genbank/genomes/Eukaryotes/vertebrates_mammals/Balaenoptera_acutorostrata/BalAcu1.0/

#	Mitochondrial sequence: NC_005271.1


#############################################################################
# fetch sequence from genbank (DONE - 2013-03-26 - Hiram)
    mkdir -p /hive/data/genomes/balAcu1/genbank
    cd /hive/data/genomes/balAcu1/genbank

    rsync -a -P rsync://ftp.ncbi.nlm.nih.gov/genbank/genomes/Eukaryotes/vertebrates_mammals/Balaenoptera_acutorostrata/BalAcu1.0/ ./

    # measure sequence to be used here  (there will be the chrMT also ...)
    faSize Primary_Assembly/unplaced_scaffolds/FASTA/unplaced.scaf.fa.gz

    #   2431671281 bases (145030652 N's 2286640629 real 2286640629 upper
    #   0 lower) in 10775 sequences in 1 files
    #   Total size: mean 225677.1 sd 1878463.2
    #   min 200 (gi|555415911|gb|ATDI01158464.1|)
    #   max 51448160 (gi|555757145|gb|KI537095.1|) median 394

#############################################################################
# fixup names for UCSC standards (DONE - 2014-03-26 - Hiram)
    cd /hive/data/genomes/balAcu1
    $HOME/kent/src/hg/utils/automation/unplacedScaffolds.pl balAcu1
    # constructs ./ucsc/ directory here:
# -rw-rw-r-- 1  20508313 Mar 26 18:04 balAcu1.ucsc.agp
# -rw-rw-r-- 1 700587893 Mar 26 18:18 balAcu1.ucsc.fa.gz
# -rw-rw-r-- 1       206 Mar 26 18:20 checkAgp.result.txt

#############################################################################
#  Initial database build (DONE - 2014-03-27 - Hiram)

    cd /hive/data/genomes/balAcu1
    cat << '_EOF_' > balAcu1.config.ra
# Config parameters for makeGenomeDb.pl:
db balAcu1
clade mammal
# genomeCladePriority 35
scientificName Balaenoptera acutorostrata scammoni
commonName Minke whale
assemblyDate Oct. 2013
assemblyLabel Korea Ocean Research & Development Institute
assemblyShortLabel BalAcu1.0
orderKey 2369
mitoAcc NC_005271.1
fastaFiles /hive/data/genomes/balAcu1/ucsc/balAcu1.ucsc.fa.gz
agpFiles /hive/data/genomes/balAcu1/ucsc/balAcu1.ucsc.agp
dbDbSpeciesDir balAcu
photoCreditURL http://www.noaa.gov/
photoCreditName NOAA - National Oceanic and Atmospheric Administration
ncbiGenomeId 10769
ncbiAssemblyId 78761
ncbiAssemblyName BalAcu1.0
ncbiBioProject 237330
genBankAccessionID GCA_000493695.1
taxId 310752
'_EOF_'
    # << happy emacs

    # stepwise, the first 'seq' step didn't work with the
    # scientificName above because the chrM sequence did not have
    # the scammoni on the name, use a config.ra for that step without
    # that part of the name, then continue with the full name:
    makeGenomeDb.pl -workhorse=hgwdev -dbHost=hgwdev -fileServer=hgwdev \
	-stop=seq balAcu1.config.ra > seq.log 2>&1

    # verify sequence and AGP are OK:
    makeGenomeDb.pl -workhorse=hgwdev -dbHost=hgwdev -fileServer=hgwdev \
	-continue=agp -stop=agp balAcu1.config.ra > agp.log 2>&1

    # then finish it off:
    makeGenomeDb.pl -workhorse=hgwdev -dbHost=hgwdev -fileServer=hgwdev \
	-continue=db balAcu1.config.ra > db.log 2>&1

#############################################################################
