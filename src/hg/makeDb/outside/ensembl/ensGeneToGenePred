#!/bin/awk -f
BEGIN {OFS="\t";pname=$11}
pname==$11 && $9 != "." {eStart=eStart","$5; eEnd=eEnd","$6; cnt = cnt+1; txEnd = $6; frames=frames","$9}
pname==$11 && $9 == "." {eStart=eStart","$5; eEnd=eEnd","$6; cnt = cnt+1; txEnd = $6; frames=frames",-1"}
pname!=$11 && $9 != "." {print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames; txStart = $5; txEnd = $6;pname = $11;pChr = $1;cdsStart=$3; cdsEnd=$4; eStart=$5; eEnd=$6; name2=$10; frames=$9; cnt=1; strand = $8}
pname!=$11 && $9 == "." {print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames; txStart = $5; txEnd = $6;pname = $11;pChr = $1;cdsStart=$3; cdsEnd=$4; eStart=$5; eEnd=$6; name2=$10; frames="-1"; cnt=1; strand = $8}
END {eStart=eStart","$5; eEnd=eEnd","$6; cnt = cnt+1; txEnd = $6; frames=frames","$9;print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames; txStart = $5;pname = $11;pChr = $1;cdsStart=$3; cdsEnd=$4; eStart=$5; eEnd=$6; name2=$10; frames=$9; cnt=1; strand = $8}
#pname==$11 && $9 == "." {eStart=eStart","$5; eEnd=eEnd","$6; cnt = cnt+1; txEnd = $6; frames=frames",-1";print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames; txStart = $5;pname = $11;pChr = $1;cdsStart=$3; cdsEnd=$4; eStart=$5; eEnd=$6; name2=$10; frames="-1"; cnt=1; strand = $8}
#pname!=$11 && $9 != "." {print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames; txStart = $5;pname = $11;pChr = $1;cdsStart=$3; cdsEnd=$4; eStart=$5; eEnd=$6; name2=$10; frames=$9; cnt=1; strand = $8;print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames}
#pname!=$11 && $9 == "." {print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames; txStart = $5;pname = $11;pChr = $1;cdsStart=$3; cdsEnd=$4; eStart=$5; eEnd=$6; name2=$10; frames="-1"; cnt=1; strand = $8;print pname, pChr, strand, txStart, txEnd, cdsStart, cdsEnd, cnt, eStart, eEnd, 0, name2, "cmpl", "cmpl", frames}
