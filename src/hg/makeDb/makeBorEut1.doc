# sequence from Mattheiu Blanchette 1/28/05 in /cluster/store8/blanchem/hsa13/ancestors1
    ssh kksilo
    mkdir -p /cluster/store10/ancestor/borEut1/sequence
    ln -s /cluster/store10/ancestor/borEut1 /cluster/data/borEut1
    cd /cluster/data/borEut1/sequence
    g=PREDICTIONANCESTRAL3
    echo $g > list
    for i in /cluster/store8/blanchem/hsa13/ancestors1/*
    do 
	f=`basename $i .ancestors`
	faSomeRecords $i list stdout | sed "s/$g/$f/" | tr -d '-' > $f.fa
	echo $i
    done
    cat *.fa > borEut1.fa
    scaffoldFaToAgp borEut1.fa  

    cd ..
    mkdir 15
    mv sequence/borEut1.agp 15/chr15.agp 
    mv sequence/borEut1.lft 15/chr15.lft 

    # Create chromosome FA file from AGP and file of masked scaffolds
    cd 15
    agpToFa -simpleMultiMixed chr15.agp chr15 chr15.fa ../sequence/borEut1.fa 

# CREATING DATABASE 
    # Create the database.
    ssh hgwdev
    echo 'create database borEut1' | hgsql ''

# STORE SEQUENCE AND ASSEMBLY INFORMATION 
    # Translate to nib
    cd /cluster/data/borEut1
    mkdir nib
    faToNib -softMask 15/chr15.fa nib/chr15.nib

    faToTwoBit */chr*.fa borEut1.2bit
    ln -s /cluster/data/borEut1/borEut1.2bit /gbdb/borEut1/nib/

    # Make symbolic links from /gbdb/borEut1/nib to the real nibs.
    mkdir -p /gbdb/borEut1/nib
    ln -s /cluster/data/borEut1/nib/chr15.nib  /gbdb/borEut1/nib

    hgsql borEut1  < $HOME/kent/src/hg/lib/chromInfo.sql             

    hgNibSeq -preMadeNib borEut1 /gbdb/borEut1/nib 15/chr15.fa
    echo "select chrom,size from chromInfo" | hgsql -N borEut1 > chrom.sizes
    echo 15 > chrom.lst

    # create assembly and gap tracks
    hgGoldGapGl -noGl -chromLst=chrom.lst borEut1 /cluster/data/borEut1 .

    echo "create table grp (PRIMARY KEY(NAME)) select * from hg17.grp" | hgsql borEut1 

# MAKE GCPERCENT 
    mkdir -p /cluster/data/borEut1/bed/gcPercent
    cd /cluster/data/borEut1/bed/gcPercent
    hgsql borEut1  < ~/src/hg/lib/gcPercent.sql

    # load gcPercent table
    hgGcPercent borEut1 ../../nib

    cd ../..

    echo 'INSERT INTO defaultDb VALUES ("BorealEutherian", "borEut1");' | hgsql -h genome-testdb hgcentraltest

    # Add dbDb and defaultDb entries:
    echo 'insert into dbDb (name, description, nibPath, organism,  \
          defaultPos, active, orderKey, genome, scientificName,  \
          htmlPath, hgNearOk)  \
          values("borEut1", "Jan. 2005", \
          "/gbdb/borEut1/nib", "BoreoEutherian", "chr15:13120186-13124117", 1, \
          44, "BoreoEutherian", "BoreoEutherian", \
          "/gbdb/borEut1/html/description.html", 0);' \
    | hgsql -h genome-testdb hgcentraltest
    echo 'update defaultDb set name = "borEut1" where genome = "BoreoEutherian"' | hgsql -h genome-testdb hgcentraltest
    echo 'insert into genomeClade (genome, clade, priority) values ("BoreoEutherian", "vertebrate",65);'  \
	| hgsql -h genome-testdb hgcentraltest

    # Make trackDb table so browser knows what tracks to expect:
    cd $HOME/kent/src/hg/makeDb/trackDb
    mkdir -p borEut/borEut1
    cvs add borEut
    cvs add borEut/borEut1
    cvs ci borEut

    # Edit that makefile to add borEut1 in all the right places and do
    make update

