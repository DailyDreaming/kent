<!DOCTYPE html PUBLIC "-//IETF//DTD HTML 2.0//EN">

<HTML>
  <HEAD>
    <TITLE>Configuring ssh for GenBank Alignments</TITLE>
  </HEAD>

  <BODY bgcolor="white">
    <H1>Configuring <CODE>ssh</CODE> for GenBank Alignments</H1>
    <P>Due to the fact that <CODE>rsh</CODE> does not return the exit
    code of the remote process, <CODE>ssh</CODE> is used to run remote
    processes.  In order for this to run unattended, 
    <CODE>ssh</CODE> must be configured to run without prompting for
    a password.  Authentication of <CODE>ssh</CODE> with <CODE>.rhosts</CODE>
    is not enabled at UCSC, so setting up a no passphrase key is the easiest
    way to achieve this.
    <OL>
      <LI> Generate a key without a passphrase.
      <PRE>
      ssh-keygen -t dsa -f ~/.ssh/nokey-dsa -N ''
      </PRE>

      <LI>Copy the contents on <CODE>.ssh/nokey-dsa.pub</CODE> to
         <CODE>.ssh/authorized_keys</CODE>.

      <LI>Modify <CODE>.ssh/config</CODE> to specify using this identity
          file:
      <PRE>
      Host *
              IdentityFile ~/.ssh/nokey_dsa
              IdentityFile ~/.ssh/id_dsa
      </PRE>
      <LI> Verify that you can ssh from <CODE>kkstore</CODE> to <CODE>kk</CODE>,
          If you are using <CODE>ssh-agent</CODE>, exit it before testing.
      <PRE>
      ssh kk uname -a
      </PRE>
      <LI> If you have started an alignment and discover that the
          <CODE>ssh</CODE> is not working correctly, fix the
          problem and restart <CODE>gbAlignStep</CODE> process
          by adding the <CODE>-continue=copy</CODE> option.  This
          restarts that process at the point of copying the files
          to the <CODE>iservers</CODE>.  All other options will be
          the same.
    </OL>
  </BODY>
</HTML>

