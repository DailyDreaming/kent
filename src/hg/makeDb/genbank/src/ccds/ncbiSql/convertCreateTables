#!/usr/bin/awk -f
#
# Convert NCBI createTables.sql (which maybe sybase) to mysql.
#
{
    $0 = gensub("\\[dbo\\]\\.", "", "g", $0);
    $0 = gensub("\\[([^\\[]+)\\]", "\\1", "g", $0);
    $0 = gensub("IDENTITY \\(1, 1\\) NOT FOR REPLICATION ", "PRIMARY KEY", "g", $0);
    $0 = gensub("CREATE TABLE ([a-zA-Z_]+)","DROP TABLE IF EXISTS \\1;\n&", "g", $0);
    $0 = gensub("ON PRIMARY.*$", "", "g", $0);
    $0 = gensub("COLLATE Latin1_General_BIN ", "", "g", $0);
    $0 = gensub("varchar \\(500\\)", "text", "g", $0);
    $0 = gensub("varchar \\(1024\\)", "text", "g", $0);
    $0 = gensub("^GO", ";", "g", $0);
    print $0;
}
