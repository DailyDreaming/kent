#!/bin/csh -f

# run on test file, diff with "golden" file

${HOME}/bin/i386/hgLoadRna -test add -type=EST fr1 test.fa test.ra \
                         >& /dev/null

# check version, type, and direction fields of mrna table
# this test input should have EST in type field
awk '{print $2, $4, $5}' < mrna.tab > mrna.out
diff mrna.out mrna.out.gold > /dev/null
set status1 = $status

# check name field of tissue table
# this test input has a trailing backslash
awk -F\\t '{print $2}' < tissue.tab > tissue.out
diff tissue.out tissue.out.gold > /dev/null
set status2 = $status

if ($status1 || $status2) then
    echo '*** FAIL ***'
    exit 1
endif
rm -f *.tab *.out
exit 0
