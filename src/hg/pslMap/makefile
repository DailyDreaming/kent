include ../../inc/common.mk
HG_WARN = ${HG_WARN_ERR}

MYLIBDIR = ../../lib/$(MACHTYPE)
MYLIBS = $(MYLIBDIR)/jkhgap.a $(MYLIBDIR)/jkweb.a
LIBS= ${MYLIBS} -lm

BINDIR= $(HOME)/bin/$(MACHTYPE)
OBJS = pslMap.o

all: ${BINDIR}/pslMap

${BINDIR}/pslMap: pslMap
	mkdir -p ${BINDIR}
	cp -f pslMap ${BINDIR}
	strip ${BINDIR}/pslMap

pslMap: ${OBJS} ${MYLIBS}
	${CC} ${CFLAGS} -o pslMap ${OBJS} ${LIBS} 

test::
	(cd tests && ${MAKE} test)

clean::
	rm -f pslMap *.o
	(cd tests && ${MAKE} clean)
