include ../../../inc/common.mk

L = ${MYSQLLIBS} -lm 
MYLIBDIR = ../../../lib/${MACHTYPE}
MYLIBS = ${MYLIBDIR}/jkpbap.a ${MYLIBDIR}/jkhgap.a ${MYLIBDIR}/jkweb.a

A = pbTracks

O = $A.o

my: compile
	rm -f ${CGI_BIN}-${USER}/$A
	mv $A ${CGI_BIN}-${USER}/$A

alpha: compile
	rm -f ${CGI_BIN}/$A
	mv $A ${CGI_BIN}/$A

beta: compile
	rm -f ${CGI_BIN}-beta/$A
	mv $A ${CGI_BIN}-beta/$A

mgsc: compile
	rm -f ${CGI_BIN}-mgsc/$A
	mv $A ${CGI_BIN}-mgsc/$A

compile: $O 
	${CC} $O ${MYLIBS} ${L}
	mv ${AOUT} $A
	${STRIP} $A
	chmod a+rx $A

install:	compile
	@if [ ! -d "${DESTDIR}${CGI_BIN}" ]; then \
		${MKDIR} "${DESTDIR}${CGI_BIN}"; \
	fi
	mv $A ${DESTDIR}${CGI_BIN}/$A

debug: $O
	${CC} $O ${MYLIBS} ${L} 
	mv ${AOUT} $A${EXE}

lib:
	cd ../../lib && ${MAKE}

clean:
	rm -f $O $A

tags:  
	ctags *.h *.c ../lib/*.c ../inc/*.h ../../lib/*.c ../../inc/*.h
